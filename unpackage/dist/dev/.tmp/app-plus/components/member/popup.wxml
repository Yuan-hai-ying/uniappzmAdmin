<block wx:if="{{show}}"><view class="popup"><block wx:if="{{popup==12}}"><view class="popup-item register-popup"><view class="centent"><image src="../../static/style/success-icon.png" mode="widthFix"></image><view class="_p">已收到你的申请</view><view class="_p">请注意接听客服电话</view><view class="_p">400-600-8888</view></view><view class="btn"><text data-event-opts="{{[['tap',[['visitBtnClick',[1,'register']]]]]}}" style="color:#007AFF;" bindtap="__e">确定</text></view></view></block><block wx:if="{{popup==11}}"><view class="popup-item pay-item"><view class="nums-item"><view class="_li"><text>{{popupPay.data.total_amount}}</text><view>应收<label class="_span">{{popupPay.data.total_amount}}</label></view></view><view class="_li"><text>{{popupPay.data.pay_amount}}</text><view>实收</view></view><view class="_li"><text>{{popupPay.data.rest_amount}}</text><view>未付</view></view></view><view class="centent"><view class="_h5 no-name">系统</view><block wx:for="{{popupPay.list}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="select"><view class="_h6">{{item.pay_name}}</view><input type="text" placeholder="￥0.00" data-event-opts="{{[['input',[['__set_model',['$0','money','$event',[]],[[['popupPay.list','',index]]]]]]]}}" value="{{item.money}}" bindinput="__e"/></view></block></view><view class="btn"><block wx:for="{{visit.btn}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitBtnClick',[index,'payItem']]]]]}}" bindtap="__e">{{item}}</text></block></view></view></block><block wx:if="{{popup==10}}"><view class="modifyReserveInfo-item popup-item"><view class="_h1">修改预约信息</view><view class="centent"><view class="_h5">门店</view><view class="select date"><text data-event-opts="{{[['tap',[['visitDateClick',['modifyReserveStore']]]]]}}" style="width:100%;" bindtap="__e">{{yuyueDetail.dept_name}}</text></view><view class="_h5">日期</view><view class="select date"><text data-event-opts="{{[['tap',[['visitDateClick',['modifyReserveDate']]]]]}}" style="width:100%;" bindtap="__e">{{yuyueDetail.appoint_date}}</text></view><view class="_h5">项目</view><block wx:for="{{yuyueDetail.items}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="select project"><view class="_h6">{{item.prod_name}}</view><view class="info"><view class="money"><input type="text" data-event-opts="{{[['input',[['__set_model',['$0','unit_price','$event',[]],[[['yuyueDetail.items','',index]]]]]]]}}" value="{{item.unit_price}}" bindinput="__e"/>元<input type="text" data-event-opts="{{[['input',[['__set_model',['$0','buy_num','$event',[]],[[['yuyueDetail.items','',index]]]]]]]}}" value="{{item.buy_num}}" bindinput="__e"/>次</view><text>{{item.teacher_name}}</text></view><image class="del" src="../../../static/style/popup-del-icon.png" mode="widthFix"></image></view></block><view data-event-opts="{{[['tap',[['addProjectClick',['modifyReserveInfo','$0'],['yuyueDetail.items']]]]]}}" class="add-project" bindtap="__e"><image class="icon" src="../../../static/member/add-project-icon.png" mode="widthFix"></image>添加新项目</view><view class="_h5">时间</view><view class="select date"><text data-event-opts="{{[['tap',[['visitTimeClick',['modifyReserveTimeStart']]]]]}}" bindtap="__e">{{yuyueDetail.appoint_btime}}</text>至<text data-event-opts="{{[['tap',[['visitTimeClick',['modifyReserveTimeEnd']]]]]}}" bindtap="__e">{{yuyueDetail.appoint_etime}}</text></view><view class="_h5 no-name">房间</view><view data-event-opts="{{[['tap',[['visitDateClick',['modifyReserveRoom','$0'],['popupList.room']]]]]}}" class="select-user" bindtap="__e">{{''+yuyueDetail.room_name+''}}<image src="../../../static/member/select-down-icon.png" mode="widthFix"></image></view><view class="_h5 no-name">备注</view><view class="select"><input type="text" data-event-opts="{{[['input',[['__set_model',['$0','remarks','$event',[]],['yuyueDetail']]]]]}}" value="{{yuyueDetail.remarks}}" bindinput="__e"/></view></view><view class="btn"><block wx:for="{{visit.btn}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitBtnClick',[index,'modifyReserveInfo']]]]]}}" bindtap="__e">{{item}}</text></block></view><block wx:if="{{project_popup.show==true}}"><view class="popup"><view class="project-popup"><view class="nav"><block wx:for="{{project_popup.nav.list}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['projectNavClick',[index,'nav']]]]]}}" class="{{['_li',(project_popup.nav.index==index)?'on':'']}}" bindtap="__e">{{item}}</view></block></view><view hidden="{{!(project_popup.nav.index==0)}}" class="popup-centent"><block wx:for="{{popupList.project}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['popupListClick',['project','$0',index],[[['popupList.project','',index]]]]]]]}}" class="{{['_li',(item.status==true)?'on':'']}}" bindtap="__e">{{''+item.name+''}}<view class="info"><view class="money">￥<text>{{item.price}}</text><text class="unit">元</text></view><block wx:if="{{item.status==true}}"><image src="../../../static/style/project-jian-icon.png" mode="widthFix"></image></block><block wx:if="{{item.status==false}}"><image src="../../../static/style/project-jia-icon.png" mode="widthFix"></image></block></view></view></block></view><view hidden="{{!(project_popup.nav.index==1)}}" class="popup-centent"><block wx:for="{{popupList.product}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['popupListClick',['product','$0',index],[[['popupList.product','',index]]]]]]]}}" class="{{['_li',(item.status==true)?'on':'']}}" bindtap="__e">{{''+item.name+''}}<view class="info"><view class="money">￥<text>{{item.price}}</text><text class="unit">元</text></view><block wx:if="{{item.status==true}}"><image src="../../../static/style/project-jian-icon.png" mode="widthFix"></image></block><block wx:if="{{item.status==false}}"><image src="../../../static/style/project-jia-icon.png" mode="widthFix"></image></block></view></view></block></view><view hidden="{{!(project_popup.nav.index==2)}}" class="popup-centent"><block wx:for="{{popupList.package}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['popupListClick',['package','$0',index],[[['popupList.package','',index]]]]]]]}}" class="{{['_li',(item.status==true)?'on':'']}}" bindtap="__e">{{''+item.name+''}}<view class="info"><view class="money">￥<text>{{item.price}}</text><text class="unit">元</text></view><block wx:if="{{item.status==true}}"><image src="../../../static/style/project-jian-icon.png" mode="widthFix"></image></block><block wx:if="{{item.status==false}}"><image src="../../../static/style/project-jia-icon.png" mode="widthFix"></image></block></view></view></block></view><view class="popup-btn"><view class="btn-info"><text class="nums">{{"已选择 "+project_popup.nums+" 件"}}</text><view class="money">￥<text>{{project_popup.money}}</text><text class="unit">元</text></view></view><button data-event-opts="{{[['tap',[['addProjectClick',['button_popup']]]]]}}" bindtap="__e">确认</button></view></view></view></block></view></block><block wx:if="{{popup==9}}"><view class="reserveInfo-item popup-item"><view class="_h1">预约信息</view><view class="centent"><view class="_h5 no-name">门店</view><view class="select"><view class="_h6">{{yuyueDetail.dept_name}}</view></view><view class="_h5 no-name">时间</view><view class="_h5 no-name">{{yuyueDetail.appoint_date+"  "+yuyueDetail.appoint_btime+"~"+yuyueDetail.appoint_etime}}</view><view class="_h5 no-name">服务</view><block wx:for="{{yuyueDetail.items}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="select"><view class="_h6">{{item.prod_name}}</view><text>{{item.unit_price+"元"+item.buy_num+"次"}}</text></view></block><view class="_h5 no-name">技师</view><view class="select"><text>{{yuyueDetail.teachers}}</text></view><view class="_h5 no-name">房间</view><view class="select"><view class="_h6">{{yuyueDetail.room_name}}</view></view><view class="_h5 no-name">备注</view><view class="select"><view class="_h6">{{yuyueDetail.remarks}}</view></view></view><view class="btn"><text data-event-opts="{{[['tap',[['visitBtnClick',['reserveInfo']]]]]}}" bindtap="__e">取消</text><block wx:if="{{yuyueDetail.status!=4&&yuyueDetail.status!=2}}"><text data-event-opts="{{[['tap',[['visitBtnClick',['reserveInfo','modify','$0'],['yuyueDetail']]]]]}}" bindtap="__e">修改预约</text></block><block wx:if="{{yuyueDetail.status!=4&&yuyueDetail.status!=2}}"><text data-event-opts="{{[['tap',[['visitBtnClick',['reserveInfo','cancel','$0'],['yuyueDetail']]]]]}}" bindtap="__e">取消预约</text></block><block wx:if="{{yuyueDetail.status!=4&&yuyueDetail.status!=2}}"><text data-event-opts="{{[['tap',[['visitBtnClick',['reserveInfo','register','$0'],['yuyueDetail']]]]]}}" bindtap="__e">收银</text></block></view></view></block><block wx:if="{{popup==8}}"><view class="transfer-item popup-item"><view class="_h1">客户转交</view><view class="centent"><view class="_h5 no-name">{{"客户名称："+transferForm.data.cus_name}}</view><view class="_h5 no-name">{{"当前归属："+transferForm.data.name_ascr_dept+"-"+transferForm.data.name_ascr_op}}</view><view class="_h5">转交给</view><view data-event-opts="{{[['tap',[['visitDateClick',['transfer','$0'],['transferForm.list']]]]]}}" class="select-user" bindtap="__e">{{''+transfer.userName.value+''}}<image src="../../static/member/select-down-icon.png" mode="widthFix"></image></view></view><view class="btn"><block wx:for="{{visit.btn}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitBtnClick',[index,'transfer']]]]]}}" bindtap="__e">{{item}}</text></block></view></view></block><block wx:if="{{popup==7}}"><view class="deposit-item popup-item"><view class="_h1">新定金</view><view class="centent"><view class="_h5">转账方式</view><view class="select"><block wx:for="{{deposit.tabs.list}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['depositTabsClick',[index]]]]]}}" class="{{[deposit.tabs.index==index?'on':'']}}" bindtap="__e">{{item}}</text></block></view><view class="_h5">支付金额</view><view class="select form"><input class="input nums" type="text" value="{{deposit.money}}" data-event-opts="{{[['input',[['__set_model',['$0','money','$event',[]],['deposit']]]]]}}" bindinput="__e"/>元</view><view class="_h5">确认金额</view><view class="select form"><input class="input nums" type="text" value="{{deposit.verify}}" data-event-opts="{{[['input',[['__set_model',['$0','verify','$event',[]],['deposit']]]]]}}" bindinput="__e"/>元</view><view class="_h5">支付日期</view><view class="select date"><text data-event-opts="{{[['tap',[['visitDateClick',['depositStart']]]]]}}" style="width:100%;" bindtap="__e">{{deposit.date}}</text></view></view><view class="btn"><block wx:for="{{visit.btn}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitBtnClick',[index,'deposit']]]]]}}" bindtap="__e">{{item}}</text></block></view></view></block><block wx:if="{{popup==6}}"><view class="follow-item popup-item"><view class="_h1">新跟进</view><view class="centent"><view class="_h5">方式</view><view class="select"><block wx:for="{{follow.tabs.list}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['followTabsClick',[index,'tabs']]]]]}}" class="{{[follow.tabs.index==index?'on':'']}}" bindtap="__e">{{item}}</text></block></view><view class="_h5">类型</view><view class="select"><block wx:for="{{follow.type.list}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['followTabsClick',[index,'type']]]]]}}" class="{{[follow.type.index==index?'on':'']}}" style="width:220rpx;" bindtap="__e">{{item}}</text></block></view><view class="_h5">日期</view><view class="select date"><text data-event-opts="{{[['tap',[['visitDateClick',['followStart']]]]]}}" style="width:100%;" bindtap="__e">{{follow.select.date}}</text></view><view class="_h5">下次跟进</view><view class="select date"><text data-event-opts="{{[['tap',[['visitDateClick',['followTimeStart']]]]]}}" style="width:100%;" bindtap="__e">{{follow.select.time}}</text></view><view class="_h5 no-name">内容</view><view class="select"><input class="input" type="text" value="{{follow.remark}}" data-event-opts="{{[['input',[['__set_model',['$0','remark','$event',[]],['follow']]]]]}}" bindinput="__e"/></view></view><view class="btn"><block wx:for="{{visit.btn}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitBtnClick',[index,'follow']]]]]}}" bindtap="__e">{{item}}</text></block></view></view></block><block wx:if="{{popup==5}}"><view class="remind-item popup-item"><view class="_h1">新提醒</view><view class="centent"><view class="_h5">提醒日期</view><view class="select date"><text data-event-opts="{{[['tap',[['visitDateClick',['remindStart']]]]]}}" style="width:100%;" bindtap="__e">{{remind.select.date}}</text></view><view class="_h5">提醒时间</view><view class="select date"><text data-event-opts="{{[['tap',[['visitTimeClick',['remindTimeStart']]]]]}}" style="width:100%;" bindtap="__e">{{remind.select.time}}</text></view><view class="_h5 no-name">内容</view><view class="select"><input class="input" type="text" value="{{remind.remark}}" data-event-opts="{{[['input',[['__set_model',['$0','remark','$event',[]],['remind']]]]]}}" bindinput="__e"/></view></view><view class="btn"><block wx:for="{{visit.btn}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitBtnClick',[index,'remind']]]]]}}" bindtap="__e">{{item}}</text></block></view></view></block><block wx:if="{{popup==4}}"><view class="reserve-item popup-item"><view class="_h1">新预约</view><view class="centent"><view class="select"><view class="switch"><view class="_h4">跨店</view><async-switch vue-id="1" checked="{{reserve.checked}}" data-event-opts="{{[['^change',[['reserveChange']]]]}}" bind:change="__e" bind:__l="__l"></async-switch>客户预约其他门店</view></view><view hidden="{{!(reserve.checked)}}" class="_h5">跨预约门店</view><view data-event-opts="{{[['tap',[['visitDateClick',['reserve']]]]]}}" hidden="{{!(reserve.checked)}}" class="select-user" bindtap="__e">{{''+reserve.store.value+''}}<image src="../../static/member/select-down-icon.png" mode="widthFix"></image></view><view class="_h5">日期</view><view class="select date"><text data-event-opts="{{[['tap',[['visitDateClick',['reserveStart']]]]]}}" style="width:100%;" bindtap="__e">{{reserve.select.date}}</text></view><view class="_h5">时间</view><view class="select date"><text data-event-opts="{{[['tap',[['visitTimeClick',['reserveTimeStart']]]]]}}" bindtap="__e">{{reserve.select.time.start}}</text>至<text data-event-opts="{{[['tap',[['visitTimeClick',['reserveTimeEnd']]]]]}}" bindtap="__e">{{reserve.select.time.end}}</text></view><view class="_h5 no-name">备注</view><view class="select"><input class="input" type="text" value="{{reserve.remark}}" data-event-opts="{{[['input',[['__set_model',['$0','remark','$event',[]],['reserve']]]]]}}" bindinput="__e"/></view><view class="_h5 no-name">项目</view><view class="add-project"><image class="icon" src="../../static/member/add-project-icon.png" mode="widthFix"></image>添加新项目</view><view class="_h5">技师</view><view class="select-user">{{''+reserve.technician.value+''}}<image src="../../static/member/select-down-icon.png" mode="widthFix"></image></view></view><view class="btn"><block wx:for="{{visit.btn}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitBtnClick',[index,'reserve']]]]]}}" bindtap="__e">{{item}}</text></block></view></view></block><block wx:if="{{popup==2}}"><view class="handselBalance-item popup-item"><view class="_h1">赠送余额</view><view class="centent"><view class="_h5">数量</view><view class="select"><input class="input nums" type="text" value="{{handselBalance.nums}}" data-event-opts="{{[['input',[['__set_model',['$0','nums','$event',[]],['handselBalance']]]]]}}" bindinput="__e"/>个</view><view class="_h5">备注</view><view class="select"><input class="input" type="text" value="{{handselBalance.remark}}" data-event-opts="{{[['input',[['__set_model',['$0','remark','$event',[]],['handselBalance']]]]]}}" bindinput="__e"/></view></view><view class="btn"><block wx:for="{{visit.btn}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitBtnClick',[index,'handselBalance']]]]]}}" bindtap="__e">{{item}}</text></block></view></view></block><block wx:if="{{popup==3}}"><view class="handselBalance-item popup-item"><view class="_h1">赠送积分</view><view class="centent"><view class="_h5">数量</view><view class="select"><input class="input nums" type="text" value="{{handselPoints.nums}}" data-event-opts="{{[['input',[['__set_model',['$0','nums','$event',[]],['handselPoints']]]]]}}" bindinput="__e"/>个</view><view class="_h5">备注</view><view class="select"><input class="input" type="text" value="{{handselPoints.remark}}" data-event-opts="{{[['input',[['__set_model',['$0','remark','$event',[]],['handselPoints']]]]]}}" bindinput="__e"/></view></view><view class="btn"><block wx:for="{{visit.btn}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitBtnClick',[index,'handselPoints']]]]]}}" bindtap="__e">{{item}}</text></block></view></view></block><block wx:if="{{popup==1}}"><view class="visit-item popup-item"><view class="_h1">新回访</view><view class="tabs"><block wx:for="{{visit.tabs.list}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitTabsClick',[index,'$0'],[[['visit.tabs.list','',index]]]]]]]}}" class="{{[visit.tabs.index==index?'on':'']}}" bindtap="__e">{{item.name}}</text></block></view><view hidden="{{!(visit.tabs.index==0)}}" class="centent"><view class="_h5">服务评价</view><view class="select"><block wx:for="{{visit.service.list}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitServiceClick',['service',index]]]]]}}" class="{{[visit.service.index==index?'on':'']}}" bindtap="__e">{{item}}</text></block></view><view class="_h5">技师评价</view><view class="select"><block wx:for="{{visit.technician.list}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitServiceClick',['technician',index]]]]]}}" class="{{[visit.technician.index==index?'on':'']}}" bindtap="__e">{{item}}</text></block></view><view class="_h5">门店评价</view><view class="select"><block wx:for="{{visit.store.list}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitServiceClick',['store',index]]]]]}}" class="{{[visit.store.index==index?'on':'']}}" bindtap="__e">{{item}}</text></block></view><view class="_h5">投诉</view><view class="select"><block wx:for="{{visit.complaint.list}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitServiceClick',['complaint',index]]]]]}}" class="{{[visit.complaint.index==index?'on':'']}}" style="width:220rpx;" bindtap="__e">{{item}}</text></block></view><view class="_h5">投诉状态</view><view class="select"><block wx:for="{{visit.status.list}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitServiceClick',['status',index]]]]]}}" class="{{[visit.status.index==index?'on':'']}}" bindtap="__e">{{item}}</text></block></view><view class="_h5">日期</view><view class="select date"><text data-event-opts="{{[['tap',[['visitDateClick',['visitConnectDate']]]]]}}" style="width:100%;" bindtap="__e">{{visit.connect.date}}</text></view><view class="_h5 no-name">内容</view><input class="input" type="text" placeholder="请输入回访内容" data-event-opts="{{[['input',[['__set_model',['$0','centent','$event',[]],['visit.connect']]]]]}}" value="{{visit.connect.centent}}" bindinput="__e"/></view><view hidden="{{!(visit.tabs.index==1)}}" class="centent"><view class="_h5">日期</view><view class="select date"><text data-event-opts="{{[['tap',[['visitDateClick',['visitStart']]]]]}}" style="width:100%;" bindtap="__e">{{visit.select.date}}</text></view><view class="_h5">内容</view><input class="input" type="text" placeholder="请输入回访内容" data-event-opts="{{[['input',[['__set_model',['$0','centent','$event',[]],['visit.select']]]]]}}" value="{{visit.select.centent}}" bindinput="__e"/></view><view hidden="{{!(visit.tabs.index==0)}}" class="btn"><block wx:for="{{visit.btn}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitBtnClick',[index,'visit']]]]]}}" bindtap="__e">{{item}}</text></block></view><view hidden="{{!(visit.tabs.index==1)}}" class="btn"><block wx:for="{{visit.btn}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['visitBtnClick',[index,'visit1']]]]]}}" bindtap="__e">{{item}}</text></block></view></view></block><w-picker class="vue-ref" vue-id="2" mode="date" startYear="2019" endYear="2030" defaultVal="{{[0,0,0]}}" current="{{true}}" themeColor="#f00" data-ref="range" data-event-opts="{{[['^confirm',[['onConfirm']]]]}}" bind:confirm="__e" bind:__l="__l"></w-picker><w-picker class="vue-ref" vue-id="3" mode="dateTime" defaultVal="{{[0,0,0]}}" current="{{true}}" themeColor="#f00" data-ref="rangeTime" data-event-opts="{{[['^confirm',[['onConfirmTime']]]]}}" bind:confirm="__e" bind:__l="__l"></w-picker><w-picker class="vue-ref" vue-id="4" mode="selector" selectList="{{transfer.userName.list}}" themeColor="#f00" data-ref="transferSelect" data-event-opts="{{[['^confirm',[['transferFormConfirm']]]]}}" bind:confirm="__e" bind:__l="__l"></w-picker><w-picker class="vue-ref" vue-id="5" mode="selector" selectList="{{reserve.store.list}}" themeColor="#f00" data-ref="reserveSelect" data-event-opts="{{[['^confirm',[['reserveFormConfirm']]]]}}" bind:confirm="__e" bind:__l="__l"></w-picker></view></block>